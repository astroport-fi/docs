# Tutorials

import DocCardList from '@theme/DocCardList';

## Overview 

There are several methods to connect to Astroport's smart contracts without having to use the Astroport Web App. The subsequent tutorials in this section do not focus on any specific implementation, package, or wallet. For your convinience, some methods for connecting to Astroport's smart contracts have been listed below. 

## Cosmos Chains


### Unix Shell

<CH.Scrollycoding>

#### Getting Started

A Unix shell can be used to directly query smart contracts deployed on any Cosmos chain. The `GET` request takes in: 

- `LCD_ENDPOINT` - LCD endpoint for the chain we are querying
- `CONTRACT_ADDRESS` - Smart contract address that we are querying
- `HEX_ENCODED_JSON` - Hex encoded json string for our query

```bash
curl --location --request GET "{LCD_ENDPOINT}/wasm/contract/{CONTRACT_ADDRESS}/smart/{HEX_ENCODED_JSON}?encoding=hex"
```

---

#### Step 1

This example uses the Terra 2 LCD endpoint and the [Assembly contract](../smart-contracts/astral-assembly) address associated with `pisco-1` testnet. 

```bash
curl --location --request GET "https://pisco-lcd.terra.dev/wasm/contract/terra195m6n5xq4rkjy47fn5y3s08tfmj3ryknj55jqvgq2y55zul9myzsgy06hk/smart/{HEX_ENCODED_JSON}?encoding=hex"
```

---

#### Step 2

To fill the `HEX_ENCODED_JSON` variable, we first need to create the `JSON` containing our query. This example queries the Assembly contract's configuration.

```json 
{
    "config": {}
}
```

---

#### Step 3

Once you have your `JSON` object, you can encode your query using a [Hex encoder](https://www.convertstring.com/EncodeDecode/HexEncode). 

The result gets inserted into our `GET` message. 


```bash
curl --location --request GET "https://pisco-lcd.terra.dev/wasm/contract/terra195m6n5xq4rkjy47fn5y3s08tfmj3ryknj55jqvgq2y55zul9myzsgy06hk/smart/7B0D0A2020202022636F6E666967223A207B7D0D0A7D?encoding=hex"
```
---

#### Step 4

Executing the query returns the current block `height` as well as an encoded `JSON` string containing our query response. 

```bash
{
    "height": "3394568", 
    "result": {
        "smart": "eyJ4YXN0cm9fdG9rZW5fYWRkciI6InRlcnJhMWN0enRoa2MwbnpzZXBwcXRxbHdxOW1qd3k5Z3E4aHQyNTM0cnRjajN5cGxlcm0wNnNubXFmYzV1Y3IiLCJ2eGFzdHJvX3Rva2VuX2FkZHIiOm51bGwsImliY19jb250cm9sbGVyIjoidGVycmExOGthdzQ4dmFsNWQ5Y3k3OXhsMGs3a3EzeDZ5MDc3djBocTlnd2h3cDdjbmF3bjJtanIycWR3YTJ3MiIsImJ1aWxkZXJfdW5sb2NrX2FkZHIiOiJ0ZXJyYTF6cWZ2M2h5dG4zOGs2MGpoZnF2YWphMGo1Z3Z5cnBqZ2NzZHh0OHo2NWZnbmEzaHk5OTlzeHh0N2VnIiwicHJvcG9zYWxfdm90aW5nX3BlcmlvZCI6MjAwLCJwcm9wb3NhbF9lZmZlY3RpdmVfZGVsYXkiOjUwLCJwcm9wb3NhbF9leHBpcmF0aW9uX3BlcmlvZCI6NDAwLCJwcm9wb3NhbF9yZXF1aXJlZF9kZXBvc2l0IjoiMTAwMCIsInByb3Bvc2FsX3JlcXVpcmVkX3F1b3J1bSI6IjAuMDAxIiwicHJvcG9zYWxfcmVxdWlyZWRfdGhyZXNob2xkIjoiMC41MSIsIndoaXRlbGlzdGVkX2xpbmtzIjpbImh0dHBzOi8vZm9ydW0uYXN0cm9wb3J0LmZpLyIsImh0dHA6Ly9mb3J1bS5hc3Ryb3BvcnQuZmkvIiwiaHR0cHM6Ly9hc3Ryb3BvcnQuZmkvIiwiaHR0cDovL2FzdHJvcG9ydC5maS8iXX0="
    }
}
```

{/* ```bash
{
    "height": "3394568", 
    "result": {
        "smart": "<base64-encoded-string>"
    }
}
``` */}

---

#### Step 5

To decode the response, we use a [Base64 decoder](https://www.base64decode.org/) and input our raw query response. 

The result is our final query response. 

```json
{
    "xastro_token_addr": "terra1ctzthkc0nzseppqtqlwq9mjwy9gq8ht2534rtcj3yplerm06snmqfc5ucr",
    "vxastro_token_addr": null,
    "ibc_controller": "terra18kaw48val5d9cy79xl0k7kq3x6y077v0hq9gwhwp7cnawn2mjr2qdwa2w2",
    "builder_unlock_addr": "terra1zqfv3hytn38k60jhfqvaja0j5gvyrpjgcsdxt8z65fgna3hy999sxxt7eg",
    "proposal_voting_period": 200,
    "proposal_effective_delay": 50,
    "proposal_expiration_period": 400,
    "proposal_required_deposit": "1000", // testnet deposit amount
    "proposal_required_quorum": "0.001",
    "proposal_required_threshold": "0.51",
    "whitelisted_links": [
        "https://forum.astroport.fi/",
        "http://forum.astroport.fi/",
        "https://astroport.fi/",
        "http://astroport.fi/"
    ]
}
```

</CH.Scrollycoding>

## Terra 2 

### feather.js

feather.js is a fork of terra.js with interchain capabilities. It can be used to interact with Cosmos blockchains like Terra within JavaScript runtimes, such as Node.js and the browser. To learn more about feather.js and installing the package, look [here](https://docs.terra.money/develop/feather-js/).

#### Setup

Getting started takes a few steps: 

- Importing feather.js and relevant classes  
- An `LCDClient` to connect to the Terra 2 blockchain
- A `MnemonicKey` to sign and broadcast transactions 
- A `wallet` (inputs our `MnemonicKey` into our `LCDClient`)

```js 
import { LCDClient, MnemonicKey, MsgExecuteContract, Coins, Fee } from '@terra-money/feather.js';

const lcd = new LCDClient({
  // key must be the chainID
  'pisco-1': {
    lcd: 'https://pisco-lcd.terra.dev', // testnet lcd
    chainID: 'pisco-1', // testnet chain-id
    gasAdjustment: 1.75,
    gasPrices: { uluna: 0.015 },
    prefix: 'terra', // bech32 prefix
  },
});

const mk = new MnemonicKey({
  mnemonic: '',
});

const wallet = lcd.wallet(mk);
```

#### Executing Messages

To execute a contract message, we create a new `MsgExecuteContract` object variable containing our `wallet`, the contract we are sending our message to, our message itself, and any `Coins` to send along with our transaction. 

This object then gets passed into a `tx` variable which creates and signs the transaction. A custom `fee` variable can also be passed in. 

Finally, our transaction gets broadcasted and the result is printed in the console. 

```js
const contract_address = '<INSERT_CONTRACT_ADDRESS>'; // A terra address on pisco-1

const execute = new MsgExecuteContract(
  wallet.key.accAddress('terra'),
  contract_address,
  {
    "swap": {
      "offer_asset": {
        "info": {
          "native_token": {
            "denom": "uluna"
          }
        },
        "amount": "100000"
      }
    }
  }, // Example execute message  
  new Coins({ uluna: '100000' }) // Coins to send with transaction
);

// Broadcast transaction
const fee = new Fee(500000, { uluna: 200000 }); // 

const tx = await wallet.createAndSignTx({
  msgs: [execute],
  fee,
  chainID: 'pisco-1',
});

const result = await lcd.tx.broadcast(tx, 'pisco-1');

console.log(result);
```

#### Querying Data

To query data from a contract, you just need to make an async call to the `LCDClient` containing the contract to query and the query itself. Note that you don't need a `MnemonicKey` or `wallet` to execute queries. 


```js
const contract_address = '<INSERT_CONTRACT_ADDRESS>'; // A terra address on pisco-1

const query = await lcd.wasm.contractQuery(
  contract_address, 
  {
    "config": {} // Example query
  }
).then(result => { console.log(result) }); // Print result 
```

## Terra Classic 

### terra.js

terra.js can be used to interact with the Terra Classic blockchain within JavaScript runtimes, such as Node.js and the browser. To learn more about terra.js and installing the package, look [here](https://classic-docs.terra.money/docs/develop/sdks/terra-js/README.html).

{/* #### Setup

```js
const { LCDClient, MnemonicKey, MsgExecuteContract } = require('@terra-money/terra.js');
// connecting to terra blockchain
const terra = new LCDClient({
    URL: 'https://pisco-lcd.terra.dev',
    chainID: 'pisco-1',
});
// wallet information
const mk = new MnemonicKey({
mnemonic: ''
});
const wallet = terra.wallet(mk);
```

#### Executing Messages

```js
```

#### Querying Data

```js
```

<DocCardList /> */}



